## From RDS parameter group
## AWS Account : dev-pet
## Group Name  : catalog-kong-rds-pg
## Console URL : https://console.aws.amazon.com/rds/home?region=us-east-1#parameter-groups-detail:ids=catalog-kong-rds-pg;type=instance
## Criteria    : isModifiable && source == 'system'

# Number of tuple inserts, updates or deletes prior to analyze as a fraction of reltuples.
autovacuum_analyze_scale_factor=0.05

# (s) Time to sleep between autovacuum runs.
autovacuum_naptime=30

# Number of tuple updates or deletes prior to vacuum as a fraction of reltuples.
autovacuum_vacuum_scale_factor=0.1

# Time spent flushing dirty buffers during checkpoint, as fraction of checkpoint interval.
checkpoint_completion_target=0.9

# Sets the clients character set encoding.
client_encoding=UTF8

# (8kB) Sets the planners assumption about the size of the disk cache.
effective_cache_size={DBInstanceClassMemory/16384}

# Use of huge pages on Linux.
huge_pages=off

# Logs each checkpoint.
log_checkpoints=1

# Sets the destination for server log output.
log_destination=stderr

# Sets the file name pattern for log files.
log_filename=postgresql.log.%Y-%m-%d-%H

# Logs the host name in the connection logs.
log_hostname=1

# (min) Automatic log file rotation will occur after N minutes.
log_rotation_age=60

# Sets the maximum number of concurrent connections.
max_connections=LEAST({DBInstanceClassMemory/9531392},5000)

# Sets the maximum number of replication slots that the server can support.
max_replication_slots=5

# (kB) Sets the maximum stack depth, in kilobytes.
max_stack_depth=6144

# Sets the maximum number of simultaneously running WAL sender processes.
max_wal_senders=10

# (16MB) Sets the WAL size that triggers a checkpoint.
max_wal_size=128

# (16MB) Sets the minimum size to shrink the WAL to.
min_wal_size=16

# Enable or disable GDAL drivers used with PostGIS in Postgres 9.3.5 and above.
postgis.gdal_enabled_drivers=ENABLE_ALL

# See log messages for RDS admin user actions in customer databases.
rds.force_admin_logging_level=undefined

# See log messages related to autovacuum operations.
rds.force_autovacuum_logging_level=undefined

# Force SSL connections.
rds.force_ssl=0

# Amazon RDS will delete PostgreSQL log that are older than N minutes.
rds.log_retention_period=4320

# Sets the number of connection slots reserved for rds_superusers.
rds.rds_superuser_reserved_connections=2

# (8kB) Sets the number of shared memory buffers used by the server.
shared_buffers={DBInstanceClassMemory/32768}

# Lists shared libraries to preload into server.
shared_preload_libraries=undefined

# Enables SSL connections.
ssl=1

# Sets the current transactions synchronization level.
synchronous_commit=on

# Sets the time zone for displaying and interpreting time stamps.
timezone=UTC

# Collects timing statistics on database IO activity.
track_io_timing=undefined

# Sets the number of WAL files held for standby servers.
wal_keep_segments=32
